<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>导入单词</title>

    <link href="../CSS/ImportWordStyle.css" rel="stylesheet">
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <script type="text/javascript" src="../JS/jquery-3.5.1.min.js"></script>

    <script type="text/javascript" language="JavaScript">
        $(document).ready(function (){
            $("#warningCloseBtn").on("click",function (){
                $("#successAlert").hide();
            })

        })
        let showAlert = function(){
            $("#successAlert").show();
        }
        let hideAlert = function(){
            $("#successAlert").hide();
        }
        // function uploadWord(){
        //     $("#uploadForm").ajaxSubmit(function (message){
        //         $("#successAlert").show();
        //         console.log(message);
        //     })
        //     return false;
        // }
        function uploadWord(){
            let formData = new FormData(document.getElementById("uploadForm"));
            $.ajax({
                type:"post",
                url:"../C++/ImportWord.cgi?uid=1",
                data:formData,
                processData:false,
                contentType:false,
                success:function (data){
                    console.log(data);
                    $("#successAlert").show();
                },
                error:function (data){
                    console.log("上传失败");
                }
            })
        }

    </script>
</head>
<body>
    <div class="alert alert-success alert-dismissible" role="alert" id="successAlert" style="display: none;">
        <button type="button" id="warningCloseBtn" class="close"><span aria-hidden="true">&times;</span></button>
        <strong>Success!</strong> 导入成功！
    </div>
    <form enctype="multipart/form-data"
          action="###"
          method="post" id="uploadForm" onsubmit="return false">
        <p>文件：<input type="file" name="wordFile" onclick="hideAlert()"/></p>
        <p><input type="submit" value="上传" onclick="uploadWord()"/></p>
    </form>
    <div id="instructionDiv">
        <h3>操作规范：</h3>
        <h4>1.提交的文件必须是.txt格式的</h4>
        <h4>2.排版</h4>
        <h4>每个单词占<b>两行</b>，分别是<b>英文单词</b>和<b>中文意思</b></h4>
        <h4>如果有例句，每个例句占<b>三行</b>。分别是<b>单词在例句中的解释</b>，<b>英文例句</b>，<b>中文翻译</b></h4>
        <img src="../img/graphic1.png">
        <h4>3.将文件编码设置为utf-8</h4>
        <img src="../img/graphic2.png">
        <img src="../img/graphic3.png">
        <h5></h5>
    </div>

    <!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
    <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
</body>
</html>